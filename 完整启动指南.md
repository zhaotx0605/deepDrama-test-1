# ğŸš€ DeepDrama å®Œæ•´å¯åŠ¨æŒ‡å—

## ğŸ“Œ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æµè§ˆå™¨è®¿é—®     â”‚  HTTP   â”‚  Vue 3 å‰ç«¯       â”‚   API   â”‚ Java åç«¯   â”‚
â”‚  localhost:5173 â”‚ â”€â”€â”€â”€â”€â”€> â”‚  (Viteå¼€å‘æœåŠ¡å™¨) â”‚ â”€â”€â”€â”€â”€â”€> â”‚  Spring Bootâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  Port: 5173       â”‚         â”‚  Port: 8080 â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                               â”‚
                                                               â–¼
                                                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                         â”‚  MySQL DB   â”‚
                                                         â”‚  deepdrama  â”‚
                                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… å½“å‰çŠ¶æ€

### å‰ç«¯æœåŠ¡ âœ… å·²å¯åŠ¨
- **çŠ¶æ€**: PM2è¿è¡Œä¸­
- **ç«¯å£**: 5173
- **è®¿é—®åœ°å€**: http://localhost:5173
- **å…¬ç½‘åœ°å€**: https://5173-i2wvcn4zqt161qrx2sfpj-5c13a017.sandbox.novita.ai

### åç«¯æœåŠ¡ â“ çŠ¶æ€æœªçŸ¥
- **éœ€è¦**: åœ¨ä½ æœ¬åœ°æœºå™¨ä¸Šè¿è¡Œ
- **ç«¯å£**: 8080
- **æŠ€æœ¯æ ˆ**: Java 8 + Spring Boot 2.7 + MyBatis + MySQL

---

## ğŸ¯ å¯åŠ¨æ­¥éª¤ï¼ˆæŒ‰é¡ºåºï¼‰

### ç¬¬ä¸€æ­¥ï¼šå¯åŠ¨æ•°æ®åº“

ç¡®ä¿MySQLæ•°æ®åº“å·²è¿è¡Œå¹¶åˆå§‹åŒ–ï¼š

```bash
# 1. å¯åŠ¨MySQLæœåŠ¡ï¼ˆæ ¹æ®ä½ çš„ç³»ç»Ÿï¼‰
# Windows: åœ¨æœåŠ¡ä¸­å¯åŠ¨MySQL
# Linux: sudo systemctl start mysql
# Mac: brew services start mysql

# 2. åˆ›å»ºæ•°æ®åº“å¹¶å¯¼å…¥æ•°æ®
mysql -u root -p

# åœ¨MySQLå‘½ä»¤è¡Œä¸­æ‰§è¡Œï¼š
CREATE DATABASE IF NOT EXISTS deepdrama CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
USE deepdrama;

# å¯¼å…¥æ•°æ®
SOURCE /home/user/webapp/database/schema.sql;
SOURCE /home/user/webapp/database/seed.sql;

# éªŒè¯æ•°æ®
SELECT COUNT(*) FROM scripts;  -- åº”è¿”å› 30
SELECT COUNT(*) FROM ratings;  -- åº”è¿”å› 35
```

---

### ç¬¬äºŒæ­¥ï¼šå¯åŠ¨åç«¯æœåŠ¡

#### æ–¹æ³•Aï¼šä½¿ç”¨Mavenï¼ˆæ¨èï¼‰

```bash
cd /home/user/webapp/backend
mvn spring-boot:run
```

#### æ–¹æ³•Bï¼šä½¿ç”¨IDEï¼ˆIntelliJ IDEA / Eclipseï¼‰

1. å¯¼å…¥Mavené¡¹ç›® `backend/`
2. é…ç½®æ•°æ®åº“è¿æ¥ï¼ˆ`src/main/resources/application.yml`ï¼‰
3. è¿è¡Œä¸»ç±» `DeepDramaApplication.java`

#### æ–¹æ³•Cï¼šæ‰“åŒ…åè¿è¡Œ

```bash
cd /home/user/webapp/backend
mvn clean package -DskipTests
java -jar target/deepdrama-0.0.1-SNAPSHOT.jar
```

#### éªŒè¯åç«¯

```bash
# æµ‹è¯•APIæ˜¯å¦æ­£å¸¸
curl http://localhost:8080/api/stats

# åº”è¿”å›ç±»ä¼¼ï¼š
# {
#   "totalScripts": 30,
#   "totalProjects": 9,
#   "pendingRatings": 4,
#   "conversionRate": 30.0,
#   ...
# }
```

---

### ç¬¬ä¸‰æ­¥ï¼šå¯åŠ¨å‰ç«¯æœåŠ¡ï¼ˆå·²å®Œæˆï¼‰

å‰ç«¯å·²é€šè¿‡PM2å¯åŠ¨ï¼Œè¿è¡Œåœ¨ `http://localhost:5173`

å¦‚æœéœ€è¦é‡å¯ï¼š

```bash
cd /home/user/webapp/frontend
pm2 restart deepdrama-frontend
```

---

## ğŸ” éªŒè¯ç³»ç»Ÿ

### 1. æ£€æŸ¥åç«¯API
```bash
curl http://localhost:8080/api/stats
curl http://localhost:8080/api/scripts
```

### 2. æ£€æŸ¥å‰ç«¯çŠ¶æ€
```bash
pm2 list
pm2 logs deepdrama-frontend --nostream --lines 10
```

### 3. æµè§ˆå™¨è®¿é—®
æ‰“å¼€æµè§ˆå™¨è®¿é—®: `http://localhost:5173`

ä½ åº”è¯¥çœ‹åˆ°ï¼š
- âœ… **æ•°æ®çœ‹æ¿**ï¼šæ˜¾ç¤ºKPIæŒ‡æ ‡å’Œå›¾è¡¨
- âœ… **å‰§æœ¬ç®¡ç†**ï¼šåˆ—è¡¨ã€æœç´¢ã€ç­›é€‰åŠŸèƒ½
- âœ… **è¯„åˆ†ç³»ç»Ÿ**ï¼šç‚¹å‡»"è¯„åˆ†"æŒ‰é’®å¼¹å‡ºè¡¨å•
- âœ… **æ’è¡Œæ¦œ**ï¼šTop 100å‰§æœ¬

---

## ğŸ› å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1ï¼šå‰ç«¯æ˜¾ç¤º"Network Error"æˆ–403é”™è¯¯

**åŸå› **: åç«¯æœªå¯åŠ¨æˆ–ç«¯å£ä¸å¯¹

**è§£å†³**:
```bash
# æ£€æŸ¥åç«¯æ˜¯å¦è¿è¡Œ
curl http://localhost:8080/api/stats

# å¦‚æœè¿”å›ç©ºæˆ–è¿æ¥å¤±è´¥ï¼Œè¯´æ˜åç«¯æœªå¯åŠ¨
# è¯·æŒ‰"ç¬¬äºŒæ­¥"å¯åŠ¨åç«¯
```

### é—®é¢˜2ï¼šåç«¯å¯åŠ¨å¤±è´¥

**å¯èƒ½åŸå› A**: æ•°æ®åº“è¿æ¥å¤±è´¥

æ£€æŸ¥ `backend/src/main/resources/application.yml`:
```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/deepdrama?useSSL=false&serverTimezone=UTC
    username: root        # ä¿®æ”¹ä¸ºä½ çš„MySQLç”¨æˆ·å
    password: your_password  # ä¿®æ”¹ä¸ºä½ çš„MySQLå¯†ç 
```

**å¯èƒ½åŸå› B**: ç«¯å£8080è¢«å ç”¨
```bash
# Windows
netstat -ano | findstr :8080

# Linux/Mac
lsof -i :8080

# æ€æ‰å ç”¨è¿›ç¨‹æˆ–ä¿®æ”¹ç«¯å£
```

### é—®é¢˜3ï¼šå‰ç«¯é¡µé¢ç©ºç™½

**è§£å†³**:
```bash
# é‡å¯å‰ç«¯æœåŠ¡
pm2 restart deepdrama-frontend

# æŸ¥çœ‹æ—¥å¿—
pm2 logs deepdrama-frontend

# å¦‚æœè¿˜ä¸è¡Œï¼Œé‡æ–°å®‰è£…ä¾èµ–
cd /home/user/webapp/frontend
rm -rf node_modules
npm install
pm2 restart deepdrama-frontend
```

### é—®é¢˜4ï¼šæ•°æ®ä¸æ˜¾ç¤º

**æ£€æŸ¥åç«¯æ—¥å¿—**ï¼Œç¡®è®¤APIè°ƒç”¨æˆåŠŸã€‚

**æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°**ï¼ˆF12 â†’ Networkï¼‰:
- è¯·æ±‚åœ°å€åº”ä¸º `http://localhost:8080/api/...`
- å“åº”çŠ¶æ€åº”ä¸º `200 OK`

---

## ğŸ“Š PM2 å‘½ä»¤é€ŸæŸ¥

```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡
pm2 list

# æŸ¥çœ‹å‰ç«¯æ—¥å¿—ï¼ˆå®æ—¶ï¼‰
pm2 logs deepdrama-frontend

# æŸ¥çœ‹å‰ç«¯æ—¥å¿—ï¼ˆæœ€è¿‘20è¡Œï¼‰
pm2 logs deepdrama-frontend --nostream --lines 20

# é‡å¯å‰ç«¯
pm2 restart deepdrama-frontend

# åœæ­¢å‰ç«¯
pm2 stop deepdrama-frontend

# åˆ é™¤å‰ç«¯è¿›ç¨‹
pm2 delete deepdrama-frontend

# æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
pm2 info deepdrama-frontend

# ç›‘æ§èµ„æºä½¿ç”¨
pm2 monit
```

---

## ğŸŒ è®¿é—®åœ°å€æ±‡æ€»

| æœåŠ¡ | æœ¬åœ°åœ°å€ | è¯´æ˜ |
|------|---------|------|
| **åç«¯API** | http://localhost:8080 | Spring BootæœåŠ¡ï¼ˆéœ€åœ¨æœ¬åœ°å¯åŠ¨ï¼‰ |
| **å‰ç«¯é¡µé¢** | http://localhost:5173 | Vue 3 å‰ç«¯ï¼ˆå·²å¯åŠ¨ï¼‰ |
| **å‰ç«¯å…¬ç½‘** | https://5173-i2wvcn4zqt161qrx2sfpj-5c13a017.sandbox.novita.ai | æ²™ç›’å…¬ç½‘åœ°å€ |
| **MySQLæ•°æ®åº“** | localhost:3306 | deepdramaæ•°æ®åº“ |

---

## âš ï¸ é‡è¦æç¤º

### å…³äºPM2
- **PM2æ˜¯è¿›ç¨‹ç®¡ç†å™¨**ï¼Œè®©æœåŠ¡åœ¨åå°è¿è¡Œ
- **æœ¬åœ°å¼€å‘å¯ä»¥ä¸ç”¨PM2**ï¼Œç›´æ¥ `npm run dev` ä¹Ÿå¯ä»¥
- **PM2ä¼˜åŠ¿**ï¼šè‡ªåŠ¨é‡å¯ã€æ—¥å¿—ç®¡ç†ã€å¤šè¿›ç¨‹ç®¡ç†

### å…³äºæ²™ç›’ç¯å¢ƒ
- å½“å‰å‰ç«¯è¿è¡Œåœ¨**æ²™ç›’ç¯å¢ƒ**ä¸­ï¼ˆç”¨äºæ¼”ç¤ºï¼‰
- **åç«¯éœ€è¦åœ¨ä½ çš„æœ¬åœ°æœºå™¨è¿è¡Œ**ï¼ˆæ²™ç›’æ— æ³•è¿æ¥ä½ æœ¬åœ°çš„MySQLï¼‰
- å¦‚æœä½ æƒ³å®Œå…¨åœ¨æœ¬åœ°è¿è¡Œï¼Œä¸¤ä¸ªæœåŠ¡éƒ½åœ¨æœ¬åœ°å¯åŠ¨å³å¯

---

## ğŸ¯ å¿«é€Ÿå¯åŠ¨å‘½ä»¤

### ä¸€é”®å¯åŠ¨åç«¯ï¼ˆåœ¨æœ¬åœ°æœºå™¨ï¼‰
```bash
cd /path/to/your/local/webapp/backend
mvn spring-boot:run
```

### ä¸€é”®é‡å¯å‰ç«¯ï¼ˆåœ¨æ²™ç›’ï¼‰
```bash
cd /home/user/webapp/frontend
pm2 restart deepdrama-frontend
```

### æŸ¥çœ‹çŠ¶æ€
```bash
# åç«¯
curl http://localhost:8080/api/stats

# å‰ç«¯
pm2 list
curl http://localhost:5173
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **å‰ç«¯è¯¦ç»†æŒ‡å—**: `/home/user/webapp/å‰ç«¯å¯åŠ¨æŒ‡å—.md`
- **åç«¯è¯¦ç»†æŒ‡å—**: `/home/user/webapp/JAVA_BACKEND_GUIDE.md`
- **APIæ–‡æ¡£**: `/home/user/webapp/backend/README.md`
- **æ•°æ®åº“è„šæœ¬**: `/home/user/webapp/database/`

---

## âœ¨ ä¸‹ä¸€æ­¥

1. âœ… **å‰ç«¯å·²å¯åŠ¨** - å½“å‰å·²å®Œæˆ
2. ğŸ”„ **åœ¨æœ¬åœ°å¯åŠ¨åç«¯** - è¯·åœ¨ä½ çš„æœºå™¨ä¸Šæ‰§è¡Œ
3. ğŸ”„ **åˆå§‹åŒ–æ•°æ®åº“** - å¯¼å…¥schemaå’Œseedè„šæœ¬
4. ğŸ‰ **è®¿é—®ç³»ç»Ÿ** - æµè§ˆå™¨æ‰“å¼€ http://localhost:5173

ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼ğŸš€
