# ğŸŒ å±€åŸŸç½‘éƒ¨ç½²æŒ‡å—

## ğŸ“‹ é…ç½®è¯´æ˜

å·²ä¸ºä½ é…ç½®å¥½å±€åŸŸç½‘è®¿é—®æ‰€éœ€çš„æ‰€æœ‰è®¾ç½®ï¼š

### âœ… å·²å®Œæˆçš„é…ç½®

1. **åç«¯é…ç½®**ï¼š
   - âœ… ç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£ï¼ˆ`server.address: 0.0.0.0`ï¼‰
   - âœ… CORSå…è®¸æ‰€æœ‰æ¥æºï¼ˆ`allowedOriginPatterns: "*"`ï¼‰
   - âœ… å…è®¸æ‰€æœ‰HTTPæ–¹æ³•ï¼ˆGET/POST/PUT/DELETEï¼‰

2. **å‰ç«¯é…ç½®**ï¼š
   - âœ… APIåœ°å€è‡ªåŠ¨æ£€æµ‹ï¼ˆæ”¯æŒlocalhostå’ŒIPè®¿é—®ï¼‰
   - âœ… Viteç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£ï¼ˆ`--host 0.0.0.0`ï¼‰
   - âœ… ç¯å¢ƒå˜é‡é…ç½®æ”¯æŒ

---

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### ç¬¬1æ­¥ï¼šè·å–æœ¬æœºIPåœ°å€

#### Windows
```cmd
ipconfig
```
æ‰¾åˆ° `IPv4 åœ°å€`ï¼Œä¾‹å¦‚ï¼š`192.168.1.100`

#### Linux/Mac
```bash
ifconfig
# æˆ–
ip addr show
```
æ‰¾åˆ°å±€åŸŸç½‘IPï¼Œä¾‹å¦‚ï¼š`192.168.1.100`

---

### ç¬¬2æ­¥ï¼šå¯åŠ¨åç«¯

```bash
cd /ä½ å­˜æ”¾ä»£ç çš„è·¯å¾„/webapp/backend

# å¯åŠ¨åç«¯ï¼ˆä¼šç›‘å¬ 0.0.0.0:8080ï¼‰
mvn spring-boot:run
```

**éªŒè¯åç«¯**ï¼š
```bash
# åœ¨æœ¬æœºéªŒè¯
curl http://localhost:8080/api/stats

# åœ¨å…¶ä»–æœºå™¨éªŒè¯ï¼ˆæ›¿æ¢ä¸ºä½ çš„IPï¼‰
curl http://192.168.1.100:8080/api/stats
```

---

### ç¬¬3æ­¥ï¼šå¯åŠ¨å‰ç«¯

```bash
cd /ä½ å­˜æ”¾ä»£ç çš„è·¯å¾„/webapp/frontend

# å¯åŠ¨å‰ç«¯ï¼ˆä¼šç›‘å¬ 0.0.0.0:5173ï¼‰
npm run dev
```

**å¯åŠ¨æˆåŠŸåä¼šæ˜¾ç¤º**ï¼š
```
VITE v7.3.0  ready in 500 ms

âœ  Local:   http://localhost:5173/
âœ  Network: http://192.168.1.100:5173/
```

**æ³¨æ„**ï¼š`Network` åé¢çš„åœ°å€å°±æ˜¯å±€åŸŸç½‘è®¿é—®åœ°å€ï¼

---

## ğŸŒ è®¿é—®æ–¹å¼

### åœ¨éƒ¨ç½²æœºå™¨ä¸Šè®¿é—®
```
http://localhost:5173
```

### åœ¨å±€åŸŸç½‘å…¶ä»–æœºå™¨ä¸Šè®¿é—®
```
http://192.168.1.100:5173
```
**ï¼ˆæ›¿æ¢ä¸ºä½ çš„å®é™…IPåœ°å€ï¼‰**

---

## ğŸ”§ APIåœ°å€è‡ªåŠ¨é…ç½®è¯´æ˜

å‰ç«¯ä¼šè‡ªåŠ¨æ£€æµ‹åç«¯åœ°å€ï¼š

### æƒ…å†µ1ï¼šä½¿ç”¨localhostè®¿é—®å‰ç«¯
```
è®¿é—®ï¼šhttp://localhost:5173
åç«¯APIï¼šhttp://localhost:8080
```
âœ… é€‚åˆæœ¬æœºå¼€å‘è°ƒè¯•

### æƒ…å†µ2ï¼šä½¿ç”¨IPè®¿é—®å‰ç«¯
```
è®¿é—®ï¼šhttp://192.168.1.100:5173
åç«¯APIï¼šhttp://192.168.1.100:8080
```
âœ… é€‚åˆå±€åŸŸç½‘å…¶ä»–æœºå™¨è®¿é—®

### æƒ…å†µ3ï¼šæ‰‹åŠ¨æŒ‡å®šåç«¯åœ°å€
åˆ›å»º `.env.local` æ–‡ä»¶ï¼š
```bash
cd /ä½ å­˜æ”¾ä»£ç çš„è·¯å¾„/webapp/frontend
cat > .env.local << EOF
VITE_API_BASE_URL=http://192.168.1.100:8080
EOF
```

ç„¶åé‡å¯å‰ç«¯ï¼š
```bash
npm run dev
```

---

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### åœ¨éƒ¨ç½²æœºå™¨ä¸Šæµ‹è¯•

#### 1. æµ‹è¯•åç«¯
```bash
curl http://localhost:8080/api/stats
curl http://192.168.1.100:8080/api/stats
```

#### 2. æµ‹è¯•å‰ç«¯
æµè§ˆå™¨æ‰“å¼€ï¼š
- `http://localhost:5173` âœ“
- `http://192.168.1.100:5173` âœ“

æŒ‰F12æŸ¥çœ‹Consoleï¼Œç¡®è®¤APIåœ°å€ï¼š
```
API Base URL: http://192.168.1.100:8080
```

---

### åœ¨å…¶ä»–æœºå™¨ä¸Šæµ‹è¯•

#### 1. æµ‹è¯•åç«¯è¿é€šæ€§
```bash
# åœ¨å…¶ä»–æœºå™¨æ‰§è¡Œï¼ˆæ›¿æ¢ä¸ºéƒ¨ç½²æœºå™¨çš„IPï¼‰
curl http://192.168.1.100:8080/api/stats
```

å¦‚æœè¿”å›JSONæ•°æ®ï¼Œè¯´æ˜åç«¯å¯è®¿é—® âœ“

#### 2. æµ‹è¯•å‰ç«¯
æµè§ˆå™¨æ‰“å¼€ï¼š
```
http://192.168.1.100:5173
```

æŒ‰F12æŸ¥çœ‹ï¼š
- **Console**: åº”è¯¥çœ‹åˆ° `API Base URL: http://192.168.1.100:8080`
- **Network**: åº”è¯¥çœ‹åˆ° `GET http://192.168.1.100:8080/api/stats - 200 OK`

---

## ğŸ›¡ï¸ é˜²ç«å¢™é…ç½®

### Windowsé˜²ç«å¢™

#### æ–¹æ³•1ï¼šé€šè¿‡GUIé…ç½®
1. æ‰“å¼€ `æ§åˆ¶é¢æ¿` â†’ `Windows Defender é˜²ç«å¢™`
2. ç‚¹å‡» `é«˜çº§è®¾ç½®`
3. ç‚¹å‡» `å…¥ç«™è§„åˆ™` â†’ `æ–°å»ºè§„åˆ™`
4. é€‰æ‹© `ç«¯å£` â†’ ä¸‹ä¸€æ­¥
5. é€‰æ‹© `TCP`ï¼Œè¾“å…¥ç«¯å£ï¼š`8080,5173` â†’ ä¸‹ä¸€æ­¥
6. é€‰æ‹© `å…è®¸è¿æ¥` â†’ ä¸‹ä¸€æ­¥
7. å…¨é€‰ï¼ˆåŸŸã€ä¸“ç”¨ã€å…¬ç”¨ï¼‰â†’ ä¸‹ä¸€æ­¥
8. åç§°ï¼š`DeepDramaæœåŠ¡` â†’ å®Œæˆ

#### æ–¹æ³•2ï¼šé€šè¿‡å‘½ä»¤é…ç½®
ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡ŒCMDï¼š
```cmd
REM å…è®¸åç«¯ç«¯å£
netsh advfirewall firewall add rule name="DeepDrama Backend" dir=in action=allow protocol=TCP localport=8080

REM å…è®¸å‰ç«¯ç«¯å£
netsh advfirewall firewall add rule name="DeepDrama Frontend" dir=in action=allow protocol=TCP localport=5173
```

---

### Linuxé˜²ç«å¢™ï¼ˆfirewalldï¼‰
```bash
# å…è®¸ç«¯å£
sudo firewall-cmd --permanent --add-port=8080/tcp
sudo firewall-cmd --permanent --add-port=5173/tcp

# é‡è½½é˜²ç«å¢™
sudo firewall-cmd --reload

# æŸ¥çœ‹å·²å¼€æ”¾ç«¯å£
sudo firewall-cmd --list-ports
```

---

### Linuxé˜²ç«å¢™ï¼ˆufwï¼‰
```bash
# å…è®¸ç«¯å£
sudo ufw allow 8080/tcp
sudo ufw allow 5173/tcp

# æŸ¥çœ‹çŠ¶æ€
sudo ufw status
```

---

### Macé˜²ç«å¢™
Macé»˜è®¤ä¸æ‹¦æˆªå‡ºç«™è¿æ¥ï¼Œé€šå¸¸ä¸éœ€è¦é…ç½®ã€‚

---

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šå…¶ä»–æœºå™¨æ— æ³•è®¿é—®

#### æ£€æŸ¥ç½‘ç»œè¿é€šæ€§
```bash
# åœ¨å…¶ä»–æœºå™¨pingéƒ¨ç½²æœºå™¨
ping 192.168.1.100
```

å¦‚æœpingä¸é€šï¼š
1. æ£€æŸ¥ä¸¤å°æœºå™¨æ˜¯å¦åœ¨åŒä¸€å±€åŸŸç½‘
2. æ£€æŸ¥éƒ¨ç½²æœºå™¨çš„é˜²ç«å¢™è®¾ç½®

#### æ£€æŸ¥ç«¯å£ç›‘å¬
åœ¨éƒ¨ç½²æœºå™¨æ‰§è¡Œï¼š
```bash
# Windows
netstat -ano | findstr :8080
netstat -ano | findstr :5173

# Linux/Mac
lsof -i :8080
lsof -i :5173
```

åº”è¯¥æ˜¾ç¤º `0.0.0.0:8080` å’Œ `0.0.0.0:5173`

---

### é—®é¢˜2ï¼šå‰ç«¯å¯ä»¥è®¿é—®ï¼ŒAPIè°ƒç”¨å¤±è´¥

#### æ£€æŸ¥æµè§ˆå™¨Console
æŒ‰F12æŸ¥çœ‹Consoleï¼Œåº”è¯¥æ˜¾ç¤ºï¼š
```
API Base URL: http://192.168.1.100:8080
```

å¦‚æœæ˜¾ç¤º `http://localhost:8080`ï¼Œè¯´æ˜APIåœ°å€é…ç½®æœ‰é—®é¢˜ã€‚

#### è§£å†³æ–¹æ¡ˆ
åˆ›å»º `.env.local` æ‰‹åŠ¨æŒ‡å®šåç«¯åœ°å€ï¼š
```bash
cd /ä½ å­˜æ”¾ä»£ç çš„è·¯å¾„/webapp/frontend
echo "VITE_API_BASE_URL=http://192.168.1.100:8080" > .env.local
npm run dev
```

---

### é—®é¢˜3ï¼šCORSé”™è¯¯

**ç—‡çŠ¶**ï¼šConsoleæ˜¾ç¤ºç±»ä¼¼é”™è¯¯ï¼š
```
Access to XMLHttpRequest at 'http://192.168.1.100:8080/api/stats' 
from origin 'http://192.168.1.100:5173' has been blocked by CORS policy
```

**åŸå› **ï¼šåç«¯CORSé…ç½®é—®é¢˜ï¼ˆä½†æˆ‘ä»¬å·²ç»é…ç½®å¥½äº†ï¼Œåº”è¯¥ä¸ä¼šå‡ºç°ï¼‰

**éªŒè¯é…ç½®**ï¼š
æ£€æŸ¥ `backend/src/main/java/com/deepdrama/config/WebConfig.java`ï¼š
```java
.allowedOriginPatterns("*")  // åº”è¯¥æ˜¯è¿™æ ·
```

---

### é—®é¢˜4ï¼šåç«¯è¿æ¥MySQLå¤±è´¥

**ç—‡çŠ¶**ï¼šåç«¯å¯åŠ¨æŠ¥é”™ `Access denied for user 'root'@'localhost'`

**è§£å†³æ–¹æ¡ˆ**ï¼š
ä¿®æ”¹ `backend/src/main/resources/application.yml`ï¼š
```yaml
datasource:
  username: root
  password: ä½ çš„MySQLå¯†ç 
```

---

## ğŸ“± ç§»åŠ¨è®¾å¤‡è®¿é—®

### æ‰‹æœºæµè§ˆå™¨è®¿é—®

1. ç¡®ä¿æ‰‹æœºå’Œç”µè„‘åœ¨åŒä¸€WiFi
2. åœ¨æ‰‹æœºæµè§ˆå™¨è¾“å…¥ï¼š`http://192.168.1.100:5173`
3. æ­£å¸¸ä½¿ç”¨

### å¹³æ¿è®¿é—®
åŒä¸Š

---

## ğŸ¯ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. ç”Ÿäº§ç¯å¢ƒæ„å»º
å¼€å‘æ¨¡å¼ï¼ˆ`npm run dev`ï¼‰æ€§èƒ½è¾ƒä½ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®æ„å»ºï¼š

```bash
cd /ä½ å­˜æ”¾ä»£ç çš„è·¯å¾„/webapp/frontend

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# é¢„è§ˆç”Ÿäº§ç‰ˆæœ¬
npm run preview
```

ç”Ÿäº§ç‰ˆæœ¬è®¿é—®ï¼š`http://192.168.1.100:4173`

---

### 2. ä½¿ç”¨Nginxéƒ¨ç½²
ç”Ÿäº§ç¯å¢ƒæ¨èä½¿ç”¨Nginxï¼š

#### å®‰è£…Nginx
```bash
# Ubuntu/Debian
sudo apt install nginx

# CentOS
sudo yum install nginx

# Mac
brew install nginx
```

#### é…ç½®Nginx
åˆ›å»º `/etc/nginx/conf.d/deepdrama.conf`ï¼š
```nginx
server {
    listen 80;
    server_name 192.168.1.100;

    # å‰ç«¯é™æ€æ–‡ä»¶
    location / {
        root /ä½ å­˜æ”¾ä»£ç çš„è·¯å¾„/webapp/frontend/dist;
        try_files $uri $uri/ /index.html;
    }

    # åç«¯APIä»£ç†
    location /api/ {
        proxy_pass http://localhost:8080/api/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

#### é‡å¯Nginx
```bash
sudo nginx -t
sudo systemctl restart nginx
```

è®¿é—®ï¼š`http://192.168.1.100`ï¼ˆä¸éœ€è¦ç«¯å£å·ï¼‰

---

## ğŸ” å®‰å…¨å»ºè®®

### 1. ç”Ÿäº§ç¯å¢ƒä¸è¦ä½¿ç”¨0.0.0.0
`0.0.0.0` ä¼šç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£ï¼ŒåŒ…æ‹¬å…¬ç½‘æ¥å£ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚

ç”Ÿäº§ç¯å¢ƒå»ºè®®ï¼š
- åªç›‘å¬å±€åŸŸç½‘æ¥å£ï¼š`server.address: 192.168.1.100`
- æˆ–ä½¿ç”¨åå‘ä»£ç†ï¼ˆNginxï¼‰

### 2. é…ç½®HTTPS
å±€åŸŸç½‘å†…å¯ä»¥ä¸ç”¨HTTPSï¼Œä½†å¦‚æœéœ€è¦ï¼š
```bash
# ä½¿ç”¨mkcertç”Ÿæˆæœ¬åœ°è¯ä¹¦
brew install mkcert  # Mac
choco install mkcert # Windows

mkcert -install
mkcert 192.168.1.100 localhost
```

### 3. é™åˆ¶CORSæ¥æº
ç”Ÿäº§ç¯å¢ƒä¸è¦ä½¿ç”¨ `allowedOriginPatterns("*")`ï¼š
```java
.allowedOrigins("http://192.168.1.100:5173")
```

---

## ğŸ“Š é…ç½®æ–‡ä»¶æ±‡æ€»

### å·²ä¿®æ”¹çš„æ–‡ä»¶

1. **backend/src/main/resources/application.yml**
   - æ·»åŠ  `server.address: 0.0.0.0`

2. **backend/src/main/java/com/deepdrama/config/WebConfig.java**
   - å·²é…ç½® `allowedOriginPatterns("*")`

3. **frontend/src/api/index.js**
   - APIåœ°å€è‡ªåŠ¨æ£€æµ‹é€»è¾‘

4. **frontend/package.json**
   - `dev` è„šæœ¬æ·»åŠ  `--host 0.0.0.0`

5. **æ–°å¢æ–‡ä»¶**ï¼š
   - `frontend/.env.development` - å¼€å‘ç¯å¢ƒé…ç½®
   - `frontend/.env.production` - ç”Ÿäº§ç¯å¢ƒé…ç½®
   - `frontend/.env.example` - é…ç½®ç¤ºä¾‹

---

## ğŸ‰ å¿«é€Ÿå¯åŠ¨å‘½ä»¤

### åœ¨éƒ¨ç½²æœºå™¨æ‰§è¡Œ

```bash
# ç»ˆç«¯1ï¼šå¯åŠ¨åç«¯
cd /ä½ å­˜æ”¾ä»£ç çš„è·¯å¾„/webapp/backend
mvn spring-boot:run

# ç»ˆç«¯2ï¼šå¯åŠ¨å‰ç«¯
cd /ä½ å­˜æ”¾ä»£ç çš„è·¯å¾„/webapp/frontend
npm run dev
```

### è·å–è®¿é—®åœ°å€
```bash
# æŸ¥çœ‹æœ¬æœºIP
ipconfig  # Windows
ifconfig  # Linux/Mac
```

å‡è®¾IPæ˜¯ `192.168.1.100`ï¼Œåˆ™ï¼š
- **æœ¬æœºè®¿é—®**ï¼š`http://localhost:5173`
- **å±€åŸŸç½‘è®¿é—®**ï¼š`http://192.168.1.100:5173`

---

## ğŸ“ æ€»ç»“

### âœ… é…ç½®å®Œæˆæ¸…å•
- âœ… åç«¯ç›‘å¬0.0.0.0ï¼ˆå…è®¸å±€åŸŸç½‘è®¿é—®ï¼‰
- âœ… åç«¯CORSå…è®¸æ‰€æœ‰æ¥æº
- âœ… å‰ç«¯ç›‘å¬0.0.0.0ï¼ˆå…è®¸å±€åŸŸç½‘è®¿é—®ï¼‰
- âœ… å‰ç«¯APIè‡ªåŠ¨æ£€æµ‹åç«¯åœ°å€
- âœ… ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶

### ğŸ¯ ä½¿ç”¨æ­¥éª¤
1. å¯åŠ¨åç«¯ï¼š`mvn spring-boot:run`
2. å¯åŠ¨å‰ç«¯ï¼š`npm run dev`
3. è·å–æœ¬æœºIPï¼ˆå¦‚ 192.168.1.100ï¼‰
4. åœ¨å…¶ä»–æœºå™¨è®¿é—®ï¼š`http://192.168.1.100:5173`

### ğŸ” éªŒè¯æˆåŠŸ
- âœ… åœ¨å…¶ä»–æœºå™¨æµè§ˆå™¨æ‰“å¼€å‰ç«¯
- âœ… F12 Consoleæ˜¾ç¤ºï¼š`API Base URL: http://192.168.1.100:8080`
- âœ… F12 Networkæ˜¾ç¤ºï¼šAPIè¯·æ±‚æˆåŠŸï¼ˆ200 OKï¼‰
- âœ… é¡µé¢æ­£å¸¸æ˜¾ç¤ºæ•°æ®

ç°åœ¨ä½ çš„ç³»ç»Ÿå·²ç»é…ç½®å¥½å±€åŸŸç½‘è®¿é—®äº†ï¼ğŸŠ
